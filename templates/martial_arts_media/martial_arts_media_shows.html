{% from "macros/nav.html" import navbar %}
{% from "macros/footer.html" import footer %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karate Shows</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<style>
    .navbar {
        margin-bottom: 12px;
        border-radius: 6px;
        border: 1px solid #ddd;
    }

    .details-panel {
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 20px;
        background-color: #f9f9f9;
    }

    .video-frame {
        width: 100%;
        aspect-ratio: 16 / 9;
        border-radius: 6px;
        border: none;
    }

    .button-stack a {
        margin-bottom: 8px;
    }
</style>
</head>

<body style="text-align: center;">

{{ navbar() }}

<header class="mb-4">
    <!-- DROPDOWN BUTTON -->
    <div class="dropdown mb-2">
        <button
            class="btn btn-primary dropdown-toggle"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false">
            Choose your Style
        </button>

        <ul class="dropdown-menu">
            {% for name, slug in martial_arts_names_dict.items() %}
                <li>
                    <a class="dropdown-item" href="{{ url_for('martial_arts_shows', art_key=slug ) }}">
                        {{ name }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
    <h1>{{ target_style }}</h1>
    <section id="intro" class="container">
        <div class="text-center mb-5">
            <p class="text-muted">
                TV shows that heavily feature martial arts often do more than entertainâ€”they can ignite a passion for
                the discipline in viewers. Seeing characters execute precise strikes, fluid kicks, and disciplined
                stances can make the art form feel both exciting and accessible. The visual storytelling highlights not
                only the physical benefits, like strength and agility, but also the mental ones, including focus,
                perseverance, and self-control. When viewers watch their favorite heroes overcome challenges using
                martial arts, it can spark a desire to experience that same confidence and mastery firsthand. Over time,
                these shows can transform passive admiration into active participation, encouraging people to enroll in
                classes and explore martial arts as a rewarding pursuit.

            </p>
        </div>
    </section>
</header>

<div class="container">

{% for key, show in shows.items() %}

    <!-- Navbar Row -->
    <nav class="navbar navbar-light bg-white">
        <div class="container-fluid">

            <!-- Movie Name -->
            <span class="navbar-brand mb-0 h5">
                {{ show.name }}
            </span>

            <!-- Hamburger Toggle -->
            <button class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#details-{{ loop.index }}"
                    aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
            </button>

        </div>
    </nav>

    <!-- Expandable Details Panel -->
    <div class="collapse" id="details-{{ loop.index }}">
        <div class="details-panel">

            <div class="row align-items-start">

                <!-- LEFT: YouTube Trailer -->
                <div class="col-md-3 text-center mb-3 mb-md-0">
                    <iframe
                        class="video-frame"
                        src="{{ show.youtube.trailer | replace('youtu.be/', 'www.youtube.com/embed/') }}"
                        allowfullscreen>
                    </iframe>
                </div>

                <!-- CENTER: Movie Details -->
                <div class="col-md-6 text-start mb-3 mb-md-0">
                    <h5>{{ show.name }}</h5>

                    <p class="mb-1"><strong>Format:</strong> {{ show.format }}</p>
                    <p class="mb-1"><strong>Release Year:</strong> {{ show.release_year }}</p>
                    <p class="mb-1">
                        <strong>Genre:</strong>
                        {{ show.genre | join(', ') }}
                    </p>
                    <p class="mb-1"><strong>Language:</strong> {{ show.language }}</p>

                    <p class="mt-3 text-muted">
                        {{ show.plot }}
                    </p>
                </div>

                <!-- RIGHT: Links -->
                <div class="col-md-3 text-center button-stack">

                    <a href="{{ show.youtube.fight_scenes_search }}"
                       target="_blank"
                       class="btn btn-danger btn-sm w-100">
                        Fight Scenes
                    </a>

                    <a href="{{ show.imdb_link }}"
                       target="_blank"
                       class="btn btn-dark btn-sm w-100">
                        IMDb
                    </a>

                    <a href="{{ show.wikipedia_link }}"
                       target="_blank"
                       class="btn btn-primary btn-sm w-100">
                        Wikipedia
                    </a>

                    <a href="{{ show.google_link }}"
                       target="_blank"
                       class="btn btn-secondary btn-sm w-100">
                        Google
                    </a>

                </div>

            </div>
        </div>
    </div>

{% endfor %}
</div>

{{ footer() }}

</body>
</html>
