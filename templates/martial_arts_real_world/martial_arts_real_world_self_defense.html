{% from "macros/nav.html" import navbar %}
{% from "macros/footer.html" import footer %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Martial Arts in the Real World</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<style>
    .navbar {
        margin-bottom: 12px;
        border-radius: 6px;
        border: 1px solid #ddd;
    }

    .details-panel {
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 20px;
        background-color: #f9f9f9;
    }

    .video-frame {
        width: 100%;
        aspect-ratio: 16 / 9;
        border-radius: 6px;
        border: none;
    }

    .button-stack a {
        margin-bottom: 8px;
    }
</style>
</head>

<body style="text-align: center;">

{{ navbar() }}

<header class="mb-4">
    <!-- DROPDOWN BUTTON -->
    <div class="dropdown mb-2">
        <button
            class="btn btn-primary dropdown-toggle"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false">
            Choose your Style
        </button>

        <ul class="dropdown-menu">
            {% for name, slug in martial_arts_names_dict.items() %}
                <li>
                    <a class="dropdown-item" href="{{ url_for('martial_arts_real_world_self_defense', art_key=slug ) }}">
                        {{ name }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
    <h1>{{ target_style }}</h1>
    <section id="intro" class="container">
        <div class="text-center mb-5">
            <p class="text-muted">
                News stories on YouTube often highlight powerful real-world examples of martial arts practitioners using
                their training to protect themselves and others in moments of danger. Whether trained in Krav Maga,
                Brazilian Jiu-Jitsu, or Karate, these individuals frequently credit their composure, awareness, and
                controlled response under pressure as the key to intervening effectively. Such reports tell stories of
                bystanders stopping assaults, store employees subduing armed robbers, or commuters defending themselves
                against sudden attacksâ€”demonstrating that martial arts training is not about aggression, but
                preparedness and responsibility. By showcasing these incidents, news segments emphasize how discipline
                and situational awareness, cultivated through years of practice, can make a critical difference in
                protecting vulnerable people and responding decisively to the dangerous actors that sometimes appear in
                everyday life.
            </p>
        </div>
    </section>
</header>

<div class="container">

{% for key, story in stories.items() %}

    <!-- Story Header Row -->
    <nav class="navbar navbar-light bg-white">
        <div class="container-fluid">

            <span class="navbar-brand mb-0 h5">
                {{ story.name }}
            </span>

            <!-- Hamburger Toggle -->
            <button class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#details-{{ loop.index }}"
                    aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
            </button>

        </div>
    </nav>

    <!-- Expandable Details Panel -->
    <div class="collapse" id="details-{{ loop.index }}">
        <div class="details-panel">

            <div class="row align-items-start">

                <!-- LEFT: YouTube Video -->
                <div class="col-md-4 mb-3 mb-md-0">
                    <iframe
                        class="video-frame"
                        src="{{ story.youtube_link | replace('youtu.be/', 'www.youtube.com/embed/') | replace('watch?v=', 'embed/') }}"
                        allowfullscreen>
                    </iframe>
                </div>

                <!-- CENTER: Summary -->
                <div class="col-md-5 text-start mb-3 mb-md-0">
                    <h5>Summary</h5>
                    <p class="text-muted">
                        {{ story.summary }}
                    </p>
                </div>

                <!-- RIGHT: YouTube Button -->
                <div class="col-md-3 text-center button-stack">
                    <a href="{{ story.youtube_link }}"
                       target="_blank"
                       class="btn btn-danger w-100">
                        Watch on YouTube
                    </a>
                </div>

            </div>
        </div>
    </div>

{% endfor %}

</div>

{{ footer() }}

</body>
</html>
