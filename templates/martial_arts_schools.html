{% from "macros/nav.html" import navbar %}
{% from "macros/footer.html" import footer %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martial Arts Schools</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        h1 { color: #1a1a1a; }
        h2 { color: #2c3e50; margin-top: 40px; }
        ul { list-style: none; padding-left: 0; }
        li { margin-bottom: 15px; }
        a { text-decoration: none; color: #3498db; }
        a:hover { text-decoration: underline; }
    </style>
</head>

<body style="text-align: center;">

{{ navbar() }}

<!-- Province-City Dropdown -->
<div class="container mt-3 mb-4">
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Choose City & Province
        </button>
        <ul class="dropdown-menu">

            {% for province, city in province_city_pairs %}
                <li>
                    <a class="dropdown-item" href="{{ url_for('martial_arts_schools', province=province, city=city) }}">
                        {{ city | capitalize }}, {{ province | replace('-', ' ') | title }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>

<div class="container">

    <h1 class="my-4">Martial Arts Schools in {{ current_location }}</h1>

    {% for section in style_schools %}
    <h2>{{ section.style }}</h2>
    <ul>
    {% for school in section.schools %}
        <li>
            <strong>{{ school.name }}</strong><br>

            {% if school.styles_taught %}
                <em>{{ school.styles_taught | join(", ") }}</em><br>
            {% endif %}

            {{ school.address }}<br>

            {% if school.phone %}
                {{ school.phone }}<br>
            {% endif %}

            {% if school.links.website %}
                <a href="{{ school.links.website }}" target="_blank">Website</a>
            {% endif %}
        </li>
    {% endfor %}
</ul>
    {% endfor %}

</div>

{{ footer() }}

<!-- Back to Top Button -->
<button id="backToTop"
        class="btn btn-primary shadow"
        style="position: fixed; bottom: 25px; right: 25px; display: none; z-index: 1050;">
    â†‘ Back to Top
</button>

<script>
    const backToTopBtn = document.getElementById("backToTop");

    window.addEventListener("scroll", function () {
        if (window.scrollY > 200) {
            backToTopBtn.style.display = "block";
        } else {
            backToTopBtn.style.display = "none";
        }
    });

    backToTopBtn.addEventListener("click", function () {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
    });
</script>

</body>
</html>
